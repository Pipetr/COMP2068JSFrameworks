{{#section 'styles'}}
<link rel="stylesheet" href="/stylesheets/work.css">
{{/section}}

<div class="container">
  <div class="form-container">
    <div class="form-header">
      <h2><i class="fas fa-edit me-2"></i>Edit Work Entry</h2>
      <p class="mb-0">Update your work hours and earnings</p>
    </div>
    
    <div class="form-body">
      {{#if error}}
        <div class="alert alert-danger" role="alert">
          {{error}}
        </div>
      {{/if}}

      <form action="/work/edit/{{workEntry._id}}" method="POST">
        <div class="form-group">
          <label for="projectId" class="form-label">Project</label>
          <select class="form-control" id="projectId" name="projectId" required>
            <option value="">Select a project...</option>
            {{#each projects}}
              <option value="{{this._id}}" data-rate="{{this.hourlyRate}}" 
                      {{#if (eq this._id ../workEntry.projectId)}}selected{{/if}}>
                {{this.name}} (${{this.hourlyRate}}/hr)
              </option>
            {{/each}}
          </select>
        </div>

        <div class="form-group">
          <label for="description" class="form-label">Description</label>
          <textarea class="form-control" id="description" name="description" rows="3"
                    placeholder="Describe the work performed" required>{{workEntry.description}}</textarea>
        </div>

        <div class="form-group">
          <label for="date" class="form-label">Date</label>
          <input type="date" class="form-control" id="date" name="date" 
                 value="{{workEntry.date}}" required>
        </div>

        <div class="form-group">
          <label class="form-label">Work Hours</label>
          <div class="time-inputs">
            <div>
              <label for="startTime" class="form-label">Start Time</label>
              <input type="time" class="form-control" id="startTime" name="startTime" 
                     value="{{workEntry.startTime}}" required>
            </div>
            <div>
              <label for="endTime" class="form-label">End Time</label>
              <input type="time" class="form-control" id="endTime" name="endTime" 
                     value="{{workEntry.endTime}}" required>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="breakTime" class="form-label">Break Time (minutes)</label>
          <input type="number" min="0" max="480" class="form-control" 
                 id="breakTime" name="breakTime" value="{{workEntry.breakTime}}" placeholder="30">
          <small class="form-text text-muted">Enter break time in minutes (e.g., 30 for 30 minutes, 60 for 1 hour)</small>
        </div>

        <div class="form-group">
          <label class="form-label">Pay Rate Type</label>
          <div class="pay-rate-options">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="payType" id="regularPay" value="regular" 
                     {{#unless workEntry.isOvertime}}checked{{/unless}}>
              <label class="form-check-label" for="regularPay">
                <i class="fas fa-clock me-2"></i>Regular Time (1.0x rate)
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="payType" id="overtimePay" value="overtime"
                     {{#if workEntry.isOvertime}}{{#if (eq workEntry.overtimeMultiplier 1.5)}}checked{{/if}}{{/if}}>
              <label class="form-check-label" for="overtimePay">
                <i class="fas fa-calendar-plus me-2"></i>Time & Half (1.5x rate)
              </label>
              <small class="form-text text-muted">For holidays, weekends, or overtime hours</small>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="payType" id="doublePay" value="double"
                     {{#if workEntry.isOvertime}}{{#if (eq workEntry.overtimeMultiplier 2.0)}}checked{{/if}}{{/if}}>
              <label class="form-check-label" for="doublePay">
                <i class="fas fa-star me-2"></i>Double Time (2.0x rate)
              </label>
              <small class="form-text text-muted">For special holidays or emergency work</small>
            </div>
          </div>
        </div>

        <div class="btn-container">
          <a href="/work/dashboard" class="btn btn-secondary">
            <i class="fas fa-arrow-left me-2"></i>Cancel
          </a>
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-save me-2"></i>Update Entry
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

{{#section 'scripts'}}
<script src="/javascripts/work.js"></script>
{{/section}}
